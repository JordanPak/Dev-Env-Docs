# Global server block configs (CUSTOM)

# Disable favicon logs
location = /favicon.ico {
	log_not_found off;
	access_log off;
}

# Deny access to dotfiles
location ~ /\. {
	deny all;
}

# Performance: Set expires headers for static files and turn off logging.
location ~* \.(bmp|jpg|jpeg|png|gif|webp|tiff|ico|svg|svgz|ico|pdf|mp3|mp4|mid|midi|mov|wav|zip)$ {
	access_log off;
	log_not_found off;
	expires 180d;
	add_header Cache-Control "public, no-transform, max-age=31536000";

	# ONLY NEEDED FOR LOCAL/STAGING ENVIRONMENTS
	try_files $uri @missing;

	# Pair try_files with the following in the server block:
	#location @missing {
	#		return 301 https://prod-domain.com$request_uri;
	#}
}

location ~* \.(js|css|swf|xml|txt|ogg|ogv|eot|otf|woff|ttf|rss|atom|zip|tgz|gz|rar|bz2|doc|xls|exe|ppt|tar|bmp|rtf)$ {
	access_log off;
	log_not_found off;
	expires 180d;
	add_header Cache-Control "public, no-transform, max-age=31536000";
}
